<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edge Demo - Stair Down</title>
    
    <link rel="stylesheet" href="../../dashboard/flowdash.css">
    <link rel="stylesheet" href="../../dashboard/flowdash-demo.css">

    <script src="../../dashboard/libs/d3.min.js"></script>
    <script src="../../dashboard/libs/d3-shape.min.js"></script>
    <script src="../../dashboard/libs/d3-dag.iife.min.js"></script>
</head>
<body>
    <header class="demo-header">
        <h1>Edge Demo</h1>
        <h2>Stair Down</h2>
        <div class="demo-controls">
            <label><input id="curvedToggle" type="checkbox"> Curved</label>
            <label><input id="ghostToggle" type="checkbox"> Ghostlines</label>
            <button id="rebuildBtn">Rebuild</button>
        </div>
    </header>

    <div class="demo-container">
        <svg id="graph" class="canvas"></svg>
    </div>

    <script type="module">
        import { makeData } from './js/edge-demo.js';
        import flowDashboard from '../../dashboard/js/index.js';

        let flowdash;

        function build() {
            const curved = document.getElementById('curvedToggle').checked;
            const ghost = document.getElementById('ghostToggle').checked;
            const dataset = makeData({ curved, ghost, mode: 'stair-down' });
            flowdash = new flowDashboard.Dashboard(dataset);
            flowdash.initialize('#graph');
            window.flowdash = flowdash;
        }

        document.getElementById('rebuildBtn').addEventListener('click', () => {
            flowdash?.reset();
            build();
        });

        build();
    </script>
</body>
</html>


